// Generated by CoffeeScript 1.6.1
/*
	FlexNav.js 0.6

	Copyright 2013, Jason Weaver http://jasonweaver.name
	Released under the WTFPL license
	http://sam.zoy.org/wtfpl/

//
*/(function(){$.fn.flexNav=function(e){var t,n,r,i,s,o,u,a,f,l,c;l=$.extend({transitionSpeed:"0.4s",itemHeight:50},e);t=$(this);a=!1;c="all "+l.transitionSpeed+" ease-in-out";t.find("li").each(function(){var e,n;if($(this).has("ul").length){$(this).addClass("item-with-ul");e=$(this).find(">ul");n=e.find("li").length;e.attr("data-height",l.itemHeight*n);return t.attr("data-height",l.itemHeight*n)}});u=t.find("li").length;t.attr("data-height",l.itemHeight*u);t.data("breakpoint")&&(i=t.data("breakpoint"));if(t.data("breakpoint-em")){o="<div class='hidden-text'>M and FlexNav</div>";$("body").append(o);n=$(".hidden-text");n.css({display:"inline-block",padding:"0","line-height":"1",position:"absolute",visibility:"hidden","font-size":"1em"});s=t.data("breakpoint-em");r=n.css("font-size");i=s*parseInt(r);console.log(i);n.remove()}f=function(){if($(window).width()<=i){t.removeClass("lg-screen").addClass("sm-screen");t.css({maxHeight:0}).find(".item-with-ul ul").css({maxHeight:0});$(".one-page li a").on("click",function(){return t.removeClass("show")});return $(".item-with-ul").off()}t.removeClass("sm-screen").addClass("lg-screen");t.removeClass("show");t.css({maxHeight:l.itemHeight}).find(".item-with-ul ul").css({maxHeight:0});return $(".item-with-ul").on({mouseenter:function(){return $(this).find(">ul").addClass("show")},mouseleave:function(){return $(this).find(">ul").removeClass("show")}})};$(".flexnav, .item-with-ul ul, .show").css({WebkitTransition:c,MozTransition:c,MsTransition:c,OTransition:c,transition:c});$(".item-with-ul, .menu-button").append('<span class="touch-button"><i class="navicon">&#9660;</i></span>');$(".menu-button, .menu-button .touch-button").on("touchstart click",function(e){var n;e.stopPropagation();e.preventDefault();n=t.data("height");if(a===!1){t.css({maxHeight:n}).addClass("show");return a=!0}if(a===!0){t.css({maxHeight:0}).removeClass("show");return a=!1}});$(".touch-button").on("touchstart click",function(e){var n,r;e.stopPropagation();e.preventDefault();n=$(this).parent(".item-with-ul").find(">ul");r=n.data("height");t.hasClass("lg-screen")===!0&&$(this).parent(".item-with-ul").siblings().find("ul.show").removeClass("show");if(n.hasClass("show")===!0)return n.css({maxHeight:0}).removeClass("show");if(n.hasClass("show")===!1)return n.css({maxHeight:r}).addClass("show")});$(".item-with-ul *").focus(function(){$(this).parent(".item-with-ul").parent().find(".open").not(this).removeClass("open");return $(this).parent(".item-with-ul").find(">ul").addClass("open")});f();return $(window).on("resize",f)}}).call(this);